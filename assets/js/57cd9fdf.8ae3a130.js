"use strict";(self.webpackChunkjv_blog=self.webpackChunkjv_blog||[]).push([[3693],{4708:(n,e,l)=>{l.r(e),l.d(e,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>o});var s=l(4848),t=l(8453);const a={},i="bug\u63cf\u8ff0",r={permalink:"/blog/develop/\u8349\u7a3f\u7bb1/\u3010\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u3011\u89e3\u51b3\u914d\u7f6eLingui\u5e93\u591a\u8bed\u8a00\u8f6c\u6362\u51fa\u73b0\u4e71\u7801\u95ee\u9898",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/develop/\u8349\u7a3f\u7bb1/\u3010\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u3011\u89e3\u51b3\u914d\u7f6eLingui\u5e93\u591a\u8bed\u8a00\u8f6c\u6362\u51fa\u73b0\u4e71\u7801\u95ee\u9898.md",source:"@site/blog/develop/\u8349\u7a3f\u7bb1/\u3010\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u3011\u89e3\u51b3\u914d\u7f6eLingui\u5e93\u591a\u8bed\u8a00\u8f6c\u6362\u51fa\u73b0\u4e71\u7801\u95ee\u9898.md",title:"bug\u63cf\u8ff0",description:"* \u3010\u73b0\u8c61\u3011\uff1a\u9879\u76ee\u7ebf\u4e0a\u4f7f\u7528\u7e41\u4f53\u5b57\u51fa\u73b0\u4e71\u7801",date:"2025-01-14T02:42:33.000Z",tags:[],readingTime:1.37,hasTruncateMarker:!1,authors:[],frontMatter:{},unlisted:!1,prevItem:{title:"develop/\u8349\u7a3f\u7bb1/\u3010Taro\u3011\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u81ea\u5b9a\u4e49\u5c0f\u7a0b\u5e8f\u6807\u9898",permalink:"/blog/develop/\u8349\u7a3f\u7bb1/\u3010Taro\u3011\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u81ea\u5b9a\u4e49\u5c0f\u7a0b\u5e8f\u6807\u9898"},nextItem:{title:"ES\u8fed\u4ee3\u76ee\u5f55",permalink:"/blog/blog-es"}},c={authorsImageUrls:[]},o=[];function d(n){const e={a:"a",code:"code",h1:"h1",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u3010\u73b0\u8c61\u3011\uff1a\u9879\u76ee\u7ebf\u4e0a\u4f7f\u7528\u7e41\u4f53\u5b57\u51fa\u73b0\u4e71\u7801"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u3010\u73af\u5883\u3011\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-json",children:'"@lingui/react": "^4.11.0",\n"@tarojs/taro": "3.5.12",\n'})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h1,{id:"\u601d\u8003\u8fc7\u7a0b",children:"\u601d\u8003\u8fc7\u7a0b"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"package.json"}),"\u5b9a\u4f4d\u95ee\u9898\u5e93\u2014\u2014",(0,s.jsx)(e.code,{children:"@lingui/react"}),"(\u591a\u8bed\u8a00\u5904\u7406\u5e93)"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u67e5\u770b\u9879\u76ee\u5e93\u914d\u7f6e\u76f8\u5173\u4ee3\u7801"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"//\u539f\u4ee3\u7801\nlet lang = Persist.getItem('lang'); \ni18n.loadLocaleData(localeData);\ni18n.load(messages);\nif (!lang) {\n  const info = Taro.getAppBaseInfo();\n  lang = info.language?.replace('-', '_');\n}\ni18n.activate(lang || 'zh_CN');\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u7b2c10\u884c\u4ee3\u7801\u8bbe\u7f6e\u672c\u5730\u8bed\u8a00\u76f8\u5173\uff0c\u4e8e\u662f\u67e5\u770b\u8bbe\u7f6e\u503c\u662f\u5426\u9644\u548c\u5e93\u517c\u5bb9\u503c\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["\u67e5\u770b\u5e93",(0,s.jsx)(e.a,{href:"https://lingui.dev/ref/conf#locales",children:"\u5f00\u53d1\u6587\u6863"})]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["\u6839\u636e\u6587\u6863\u53ef\u77e5\u9053\uff0c\u8be5\u5e93\u672c\u5730\u5316\u9700\u8981\u9075\u5faa",(0,s.jsx)(e.a,{href:"http://www.unicode.org/cldr/charts/latest/supplemental/language_plural_rules.html",children:"BCP-47 code"})]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"PS\uff1a\u4e0a\u8ff0\u5b98\u65b9\u6587\u6863\u4e2d\uff0c\u7e41\u4f53\u4e2d\u6587\u7684\u8bbe\u7f6e"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://gitee.com/lao-jiawei/photo-gallery/raw/master/images/blog/20240922105106.png",alt:""})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u800c\u5fae\u4fe1\u83b7\u53d6\u5230\u7684\u503c\u4e3a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://gitee.com/lao-jiawei/photo-gallery/raw/master/images/blog/20240921233051.png",alt:""})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h1,{id:"\u89e3\u51b3",children:"\u89e3\u51b3"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"//\u4e0a\u8ff0\u4ee3\u7801\u7b2c3\u884c\u540e\u7684\u6539\u4e3a\u4e0b\u8ff0\u4ee3\u7801\n// lingui\u5e93\u672c\u5730\u5316\u8bbe\u7f6e\nlet textLang = lang;\ni18n.loadLocaleData(localeData);\ni18n.load(messages);\nif (!textLang) {\n  const info = Taro.getAppBaseInfo();\n  lang = info.language?.replace('_', '-');\n  const textMap = {\n    'zh-CN': 'zh',\n    'zh-TW': 'yue',\n    'zh-HK': 'yue',\n  }\n  textLang = textMap[lang];\n}\ni18n.activate(textLang || 'zh');\n"})}),"\n",(0,s.jsx)(e.h1,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"lingui\u5e93\u652f\u6301BCP-47 code \u8bed\u8a00\u6807\u8bb0\u503c\u8bbe\u7f6e\u672c\u5730\u8f6c\u6362"}),"\n",(0,s.jsx)(e.li,{children:"\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u4f7f\u7528lingui\u5e93\u9700\u8981\u5bf9\u8bed\u8a00\u6807\u8bb0\u503c\u8fdb\u884c\u8f6c\u6362"}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},8453:(n,e,l)=>{l.d(e,{R:()=>i,x:()=>r});var s=l(6540);const t={},a=s.createContext(t);function i(n){const e=s.useContext(a);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:i(n.components),s.createElement(a.Provider,{value:e},n.children)}}}]);