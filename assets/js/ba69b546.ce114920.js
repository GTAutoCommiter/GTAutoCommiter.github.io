"use strict";(self.webpackChunkjv_blog=self.webpackChunkjv_blog||[]).push([[7338],{945:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var r=t(4848),s=t(8453);const o={},c=void 0,i={id:"react/\u77e5\u8bc6\u5e93/Context API \u5b9e\u73b0\u5168\u5c40\u72b6\u6001\u7ba1\u7406",title:"Context API \u5b9e\u73b0\u5168\u5c40\u72b6\u6001\u7ba1\u7406",description:"React Context API \u662f React \u63d0\u4f9b\u7684\u4e00\u79cd\u7528\u4e8e\u5728\u7ec4\u4ef6\u4e4b\u95f4\u5171\u4eab\u6570\u636e\u7684\u65b9\u5f0f\u3002\u7528\u901a\u4fd7\u7684\u8bdd\u6765\u8bf4\uff0c\u5b83\u5c31\u50cf\u662f\u4e00\u4e2a\u201c\u5168\u5c40\u53d8\u91cf\u201d\uff0c\u53ef\u4ee5\u8ba9\u4f60\u7684\u6570\u636e\u5728\u7ec4\u4ef6\u6811\u4e2d\u4f20\u9012\uff0c\u800c\u4e0d\u9700\u8981\u901a\u8fc7 props \u4e00\u5c42\u4e00\u5c42\u5730\u624b\u52a8\u4f20\u9012\u3002",source:"@site/docs/react/\u77e5\u8bc6\u5e93/Context API \u5b9e\u73b0\u5168\u5c40\u72b6\u6001\u7ba1\u7406.md",sourceDirName:"react/\u77e5\u8bc6\u5e93",slug:"/react/\u77e5\u8bc6\u5e93/Context API \u5b9e\u73b0\u5168\u5c40\u72b6\u6001\u7ba1\u7406",permalink:"/docs/react/\u77e5\u8bc6\u5e93/Context API \u5b9e\u73b0\u5168\u5c40\u72b6\u6001\u7ba1\u7406",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"react",previous:{title:"\u77e5\u8bc6\u5e93",permalink:"/docs/category/\u77e5\u8bc6\u5e93-1"},next:{title:"JSX\u8bed\u6cd5",permalink:"/docs/react-jsx"}},l={},d=[{value:"<strong>1. \u4ec0\u4e48\u662f Context API\uff1f</strong>",id:"1-\u4ec0\u4e48\u662f-context-api",level:3},{value:"<strong>2. \u4e3a\u4ec0\u4e48\u9700\u8981 Context API\uff1f</strong>",id:"2-\u4e3a\u4ec0\u4e48\u9700\u8981-context-api",level:3},{value:"<strong>3. Context API \u7684\u6838\u5fc3\u6982\u5ff5</strong>",id:"3-context-api-\u7684\u6838\u5fc3\u6982\u5ff5",level:3},{value:"<strong>3.1 <code>React.createContext</code></strong>",id:"31-reactcreatecontext",level:4},{value:"<strong>3.2 <code>Provider</code></strong>",id:"32-provider",level:4},{value:"<strong>3.3 <code>Consumer</code></strong>",id:"33-consumer",level:4},{value:"<strong>3.4 <code>useContext</code> Hook</strong>",id:"34-usecontext-hook",level:4},{value:"<strong>4. \u5982\u4f55\u4f7f\u7528 Context API\uff1f</strong>",id:"4-\u5982\u4f55\u4f7f\u7528-context-api",level:3},{value:"<strong>4.1 \u521b\u5efa Context</strong>",id:"41-\u521b\u5efa-context",level:4},{value:"<strong>4.2 \u63d0\u4f9b\u6570\u636e\uff08Provider\uff09</strong>",id:"42-\u63d0\u4f9b\u6570\u636eprovider",level:4},{value:"<strong>4.3 \u6d88\u8d39\u6570\u636e\uff08Consumer\uff09</strong>",id:"43-\u6d88\u8d39\u6570\u636econsumer",level:4},{value:"<strong>4.4 \u4f7f\u7528 <code>useContext</code> Hook</strong>",id:"44-\u4f7f\u7528-usecontext-hook",level:4},{value:"<strong>5. Context API \u7684\u4f18\u70b9</strong>",id:"5-context-api-\u7684\u4f18\u70b9",level:3},{value:"<strong>6. Context API \u7684\u6ce8\u610f\u4e8b\u9879</strong>",id:"6-context-api-\u7684\u6ce8\u610f\u4e8b\u9879",level:3},{value:"<strong>7. \u603b\u7ed3</strong>",id:"7-\u603b\u7ed3",level:3}];function x(e){const n={code:"code",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"React Context API"})," \u662f React \u63d0\u4f9b\u7684\u4e00\u79cd\u7528\u4e8e\u5728\u7ec4\u4ef6\u4e4b\u95f4\u5171\u4eab\u6570\u636e\u7684\u65b9\u5f0f\u3002\u7528\u901a\u4fd7\u7684\u8bdd\u6765\u8bf4\uff0c\u5b83\u5c31\u50cf\u662f\u4e00\u4e2a\u201c\u5168\u5c40\u53d8\u91cf\u201d\uff0c\u53ef\u4ee5\u8ba9\u4f60\u7684\u6570\u636e\u5728\u7ec4\u4ef6\u6811\u4e2d\u4f20\u9012\uff0c\u800c\u4e0d\u9700\u8981\u901a\u8fc7 ",(0,r.jsx)(n.code,{children:"props"})," \u4e00\u5c42\u4e00\u5c42\u5730\u624b\u52a8\u4f20\u9012\u3002"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"1-\u4ec0\u4e48\u662f-context-api",children:(0,r.jsx)(n.strong,{children:"1. \u4ec0\u4e48\u662f Context API\uff1f"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Context API"})," \u662f React \u63d0\u4f9b\u7684\u4e00\u79cd\u8de8\u7ec4\u4ef6\u4f20\u9012\u6570\u636e\u7684\u673a\u5236\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:["\u5b83\u89e3\u51b3\u4e86 ",(0,r.jsx)(n.strong,{children:"\u201cprop drilling\u201d"})," \u95ee\u9898\uff08\u5373\u901a\u8fc7 ",(0,r.jsx)(n.code,{children:"props"})," \u4e00\u5c42\u4e00\u5c42\u4f20\u9012\u6570\u636e\u7684\u9ebb\u70e6\uff09\u3002"]}),"\n",(0,r.jsx)(n.li,{children:"\u4f60\u53ef\u4ee5\u628a Context \u60f3\u8c61\u6210\u4e00\u4e2a\u201c\u6570\u636e\u5bb9\u5668\u201d\uff0c\u4efb\u4f55\u7ec4\u4ef6\u90fd\u53ef\u4ee5\u4ece\u8fd9\u4e2a\u5bb9\u5668\u4e2d\u8bfb\u53d6\u6570\u636e\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"2-\u4e3a\u4ec0\u4e48\u9700\u8981-context-api",children:(0,r.jsx)(n.strong,{children:"2. \u4e3a\u4ec0\u4e48\u9700\u8981 Context API\uff1f"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u573a\u666f"}),"\uff1a\u5f53\u4f60\u7684\u5e94\u7528\u4e2d\u6709\u5f88\u591a\u7ec4\u4ef6\u9700\u8981\u5171\u4eab\u67d0\u4e9b\u6570\u636e\uff08\u6bd4\u5982\u7528\u6237\u4fe1\u606f\u3001\u4e3b\u9898\u8bbe\u7f6e\uff09\u65f6\uff0c\u5982\u679c\u901a\u8fc7 ",(0,r.jsx)(n.code,{children:"props"})," \u4e00\u5c42\u4e00\u5c42\u4f20\u9012\uff0c\u4ee3\u7801\u4f1a\u53d8\u5f97\u975e\u5e38\u5197\u957f\u548c\u96be\u4ee5\u7ef4\u62a4\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),"\uff1a\u4f7f\u7528 Context API\uff0c\u4f60\u53ef\u4ee5\u628a\u8fd9\u4e9b\u6570\u636e\u653e\u5230\u4e00\u4e2a\u201c\u5168\u5c40\u201d\u7684\u5730\u65b9\uff0c\u4efb\u4f55\u7ec4\u4ef6\u90fd\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\uff0c\u800c\u4e0d\u9700\u8981\u901a\u8fc7 ",(0,r.jsx)(n.code,{children:"props"})," \u4f20\u9012\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"3-context-api-\u7684\u6838\u5fc3\u6982\u5ff5",children:(0,r.jsx)(n.strong,{children:"3. Context API \u7684\u6838\u5fc3\u6982\u5ff5"})}),"\n",(0,r.jsx)(n.h4,{id:"31-reactcreatecontext",children:(0,r.jsxs)(n.strong,{children:["3.1 ",(0,r.jsx)(n.code,{children:"React.createContext"})]})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u7528\u4e8e\u521b\u5efa\u4e00\u4e2a Context \u5bf9\u8c61\u3002"}),"\n",(0,r.jsxs)(n.li,{children:["\u8fd9\u4e2a\u5bf9\u8c61\u5305\u542b\u4e24\u4e2a\u7ec4\u4ef6\uff1a",(0,r.jsx)(n.code,{children:"Provider"})," \u548c ",(0,r.jsx)(n.code,{children:"Consumer"}),"\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"32-provider",children:(0,r.jsxs)(n.strong,{children:["3.2 ",(0,r.jsx)(n.code,{children:"Provider"})]})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u7528\u4e8e\u63d0\u4f9b\u6570\u636e\u3002"}),"\n",(0,r.jsxs)(n.li,{children:["\u5b83\u5305\u88f9\u5728\u9700\u8981\u5171\u4eab\u6570\u636e\u7684\u7ec4\u4ef6\u6811\u5916\u5c42\uff0c\u5e76\u901a\u8fc7 ",(0,r.jsx)(n.code,{children:"value"})," \u5c5e\u6027\u4f20\u9012\u6570\u636e\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"33-consumer",children:(0,r.jsxs)(n.strong,{children:["3.3 ",(0,r.jsx)(n.code,{children:"Consumer"})]})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u7528\u4e8e\u6d88\u8d39\u6570\u636e\u3002"}),"\n",(0,r.jsxs)(n.li,{children:["\u5b83\u53ef\u4ee5\u5728\u4efb\u4f55\u5b50\u7ec4\u4ef6\u4e2d\u8bbf\u95ee ",(0,r.jsx)(n.code,{children:"Provider"})," \u63d0\u4f9b\u7684\u6570\u636e\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"34-usecontext-hook",children:(0,r.jsxs)(n.strong,{children:["3.4 ",(0,r.jsx)(n.code,{children:"useContext"})," Hook"]})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u7528\u4e8e\u5728\u51fd\u6570\u7ec4\u4ef6\u4e2d\u66f4\u65b9\u4fbf\u5730\u8bbf\u95ee Context \u6570\u636e\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"4-\u5982\u4f55\u4f7f\u7528-context-api",children:(0,r.jsx)(n.strong,{children:"4. \u5982\u4f55\u4f7f\u7528 Context API\uff1f"})}),"\n",(0,r.jsx)(n.p,{children:"\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u5c55\u793a\u5982\u4f55\u4f7f\u7528 Context API \u5171\u4eab\u4e3b\u9898\u6570\u636e\u3002"}),"\n",(0,r.jsx)(n.h4,{id:"41-\u521b\u5efa-context",children:(0,r.jsx)(n.strong,{children:"4.1 \u521b\u5efa Context"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"import React from 'react';\n\n// \u521b\u5efa\u4e00\u4e2a Context \u5bf9\u8c61\nconst ThemeContext = React.createContext();\n"})}),"\n",(0,r.jsx)(n.h4,{id:"42-\u63d0\u4f9b\u6570\u636eprovider",children:(0,r.jsx)(n.strong,{children:"4.2 \u63d0\u4f9b\u6570\u636e\uff08Provider\uff09"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"function App() {\n  const theme = 'dark'; // \u53ef\u4ee5\u662f\u4efb\u4f55\u6570\u636e\n\n  return (\n    // \u4f7f\u7528 Provider \u5305\u88f9\u7ec4\u4ef6\u6811\uff0c\u5e76\u901a\u8fc7 value \u4f20\u9012\u6570\u636e\n    <ThemeContext.Provider value={theme}>\n      <Header />\n      <Content />\n    </ThemeContext.Provider>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"43-\u6d88\u8d39\u6570\u636econsumer",children:(0,r.jsx)(n.strong,{children:"4.3 \u6d88\u8d39\u6570\u636e\uff08Consumer\uff09"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"function Header() {\n  return (\n    // \u4f7f\u7528 Consumer \u8bbf\u95ee Context \u6570\u636e\n    <ThemeContext.Consumer>\n      {theme => (\n        <header style={{ background: theme === 'dark' ? '#333' : '#fff' }}>\n          Header\n        </header>\n      )}\n    </ThemeContext.Consumer>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"44-\u4f7f\u7528-usecontext-hook",children:(0,r.jsxs)(n.strong,{children:["4.4 \u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"useContext"})," Hook"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"import React, { useContext } from 'react';\n\nfunction Content() {\n  // \u4f7f\u7528 useContext \u8bbf\u95ee Context \u6570\u636e\n  const theme = useContext(ThemeContext);\n\n  return (\n    <div style={{ background: theme === 'dark' ? '#333' : '#fff' }}>\n      Content\n    </div>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"5-context-api-\u7684\u4f18\u70b9",children:(0,r.jsx)(n.strong,{children:"5. Context API \u7684\u4f18\u70b9"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u7b80\u5316\u6570\u636e\u4f20\u9012"}),"\uff1a\u4e0d\u9700\u8981\u901a\u8fc7 ",(0,r.jsx)(n.code,{children:"props"})," \u4e00\u5c42\u4e00\u5c42\u4f20\u9012\u6570\u636e\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u4ee3\u7801\u66f4\u6e05\u6670"}),"\uff1a\u5171\u4eab\u6570\u636e\u7684\u903b\u8f91\u96c6\u4e2d\u5728\u4e00\u4e2a\u5730\u65b9\uff0c\u6613\u4e8e\u7ef4\u62a4\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u7075\u6d3b\u6027"}),"\uff1a\u53ef\u4ee5\u5728\u4efb\u4f55\u7ec4\u4ef6\u4e2d\u8bbf\u95ee Context \u6570\u636e\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"6-context-api-\u7684\u6ce8\u610f\u4e8b\u9879",children:(0,r.jsx)(n.strong,{children:"6. Context API \u7684\u6ce8\u610f\u4e8b\u9879"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u4e0d\u8981\u6ee5\u7528"}),"\uff1aContext \u9002\u5408\u5171\u4eab\u5168\u5c40\u6570\u636e\uff08\u5982\u7528\u6237\u4fe1\u606f\u3001\u4e3b\u9898\u8bbe\u7f6e\uff09\uff0c\u4f46\u4e0d\u9002\u5408\u6240\u6709\u573a\u666f\u3002\u5bf9\u4e8e\u5c40\u90e8\u72b6\u6001\uff0c\u4ecd\u7136\u63a8\u8350\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"useState"})," \u6216 ",(0,r.jsx)(n.code,{children:"useReducer"}),"\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u6027\u80fd\u95ee\u9898"}),"\uff1a\u5982\u679c Context \u7684\u6570\u636e\u9891\u7e41\u53d8\u5316\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5927\u91cf\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\u3002\u53ef\u4ee5\u901a\u8fc7\u62c6\u5206 Context \u6216\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"memo"})," \u4f18\u5316\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"7-\u603b\u7ed3",children:(0,r.jsx)(n.strong,{children:"7. \u603b\u7ed3"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Context API"})," \u662f React \u63d0\u4f9b\u7684\u4e00\u79cd\u8de8\u7ec4\u4ef6\u5171\u4eab\u6570\u636e\u7684\u673a\u5236\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:["\u5b83\u901a\u8fc7 ",(0,r.jsx)(n.code,{children:"Provider"})," \u63d0\u4f9b\u6570\u636e\uff0c\u901a\u8fc7 ",(0,r.jsx)(n.code,{children:"Consumer"})," \u6216 ",(0,r.jsx)(n.code,{children:"useContext"})," \u6d88\u8d39\u6570\u636e\u3002"]}),"\n",(0,r.jsx)(n.li,{children:"\u9002\u5408\u7528\u4e8e\u5171\u4eab\u5168\u5c40\u6570\u636e\uff0c\u7b80\u5316\u7ec4\u4ef6\u4e4b\u95f4\u7684\u6570\u636e\u4f20\u9012\u3002"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(x,{...e})}):x(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>i});var r=t(6540);const s={},o=r.createContext(s);function c(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);