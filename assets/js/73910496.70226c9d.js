"use strict";(self.webpackChunkjv_blog=self.webpackChunkjv_blog||[]).push([[189],{6873:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>c,metadata:()=>d,toc:()=>a});var t=r(4848),i=r(8453);const c={id:"react-source-code-fiber",slug:"/react-source-code-fiber",title:"Fiber",date:new Date("2024-07-15T00:00:00.000Z")},s=void 0,d={id:"react/\u6e90\u7801\u9605\u8bfb/\u6570\u636e\u7ed3\u6784/react-source-code-fiber",title:"Fiber",description:"Fiber\u5c5e\u6027",source:"@site/docs/react/\u6e90\u7801\u9605\u8bfb/\u6570\u636e\u7ed3\u6784/Fiber.md",sourceDirName:"react/\u6e90\u7801\u9605\u8bfb/\u6570\u636e\u7ed3\u6784",slug:"/react-source-code-fiber",permalink:"/docs/react-source-code-fiber",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"react-source-code-fiber",slug:"/react-source-code-fiber",title:"Fiber",date:"2024-07-15T00:00:00.000Z"},sidebar:"react",previous:{title:"render",permalink:"/docs/react-source-code-renderStep-render"},next:{title:"TypeOfMode",permalink:"/docs/react-source-code-TypeOfMode"}},l={},a=[{value:"Fiber\u5c5e\u6027",id:"fiber\u5c5e\u6027",level:2},{value:"DOM\u5b9e\u4f8b\u76f8\u5173",id:"dom\u5b9e\u4f8b\u76f8\u5173",level:3},{value:"\u6784\u5efaFiber\u6570\u76f8\u5173",id:"\u6784\u5efafiber\u6570\u76f8\u5173",level:3},{value:"\u72b6\u6001\u6570\u636e\u76f8\u5173",id:"\u72b6\u6001\u6570\u636e\u76f8\u5173",level:3},{value:"\u526f\u4f5c\u7528\u76f8\u5173",id:"\u526f\u4f5c\u7528\u76f8\u5173",level:3},{value:"<code>v18.1.3</code>",id:"v1813",level:4},{value:"<code>v17</code>",id:"v17",level:4}];function o(e){const n={code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"fiber\u5c5e\u6027",children:"Fiber\u5c5e\u6027"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"\u6587\u4ef6\u4f4d\u7f6e"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u7248\u672c"}),(0,t.jsx)(n.th,{children:"\u6587\u4ef6\u4f4d\u7f6e"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"18.3.1"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"packages/react-reconciler/src/ReactInternalTypes.js"})})]})})]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"dom\u5b9e\u4f8b\u76f8\u5173",children:"DOM\u5b9e\u4f8b\u76f8\u5173"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"type Fiber={\n  // \u6807\u8bb0\u4e0d\u540c\u7684\u7ec4\u4ef6\u7c7b\u578b\n  tag:WorkTag,\n  \n  // \u7ec4\u4ef6\u7c7b\u578b div\u3001span\u3001\u7ec4\u4ef6\u6784\u9020\u51fd\u6570\n  // create\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\n  type:any,\n  \n  // \u793a\u4f8b\u5bf9\u8c61 \u5982\u7c7b\u7ec4\u4ef6\u7684\u5b9e\u4f8b\u3001\u539f\u751f dom \u5b9e\u4f8b\uff0c\u800cfunction \u7ec4\u4ef6\u6ca1\u6709\u5b9e\u4f8b\uff0c\u56e0\u6b64\u8be5\u5c5e\u6027\u662f\u7a7a\n  stateNode:any,\n  //...\n}\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"WorkTag\u8be6\u60c5"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u6784\u5efafiber\u6570\u76f8\u5173",children:"\u6784\u5efaFiber\u6570\u76f8\u5173"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"type Fiber={\n  //...\n  \n  // \u6307\u5411\u81ea\u5df1\u7684\u7236\u7ea7 Fiber \u5bf9\u8c61\n  return: Fiber | null,\n  \n  // \u6307\u5411\u81ea\u5df1\u7684\u7b2c\u4e00\u4e2a\u5b50\u7ea7 Fiber \u5bf9\u8c61\n  child\uff1a Fiber | null,\n  \n  // \u6307\u5411\u81ea\u5df1\u7684\u4e0b\u4e00\u4e2a\u5144\u5f1f Fiber \u5bf9\u8c61\n  sibling\uff1a Fiber | null,\n  \n  //\u5728 Fiber \u6811\u66f4\u65b0\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6bcf\u4e2a Fiber \u90fd\u4f1a\u6709\u4e00\u4e2a\u8ddf\u5176\u5bf9\u5e94\u7684 Fiber\n  //\u79f0\u4e3a current <==> workInProgress\n  //\u5728\u6e32\u67d3\u5b8c\u6210\u4e4b\u540e\u4ed6\u4eec\u4f1a\u4ea4\u6362\u4f4d\u7f6e\n  //alternate \u6307\u5411\u5f53\u524d Fiber \u5728 workInProgress \u6811\u4e2d\u5bf9\u5e94 Fiber\n  alternate: Fiber | null,\n  \n  //...\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u72b6\u6001\u6570\u636e\u76f8\u5173",children:"\u72b6\u6001\u6570\u636e\u76f8\u5173"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"type Fiber={\n  //...\n  // \u5373\u5c06\u66f4\u65b0\u7684 props\n  paddingProps:any,\n  \n  // \u65e7\u7684 props\n  memoizedProps:any,\n  \n  // \u65e7\u7684 state\n  memoizedState:any,\n  //...\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u526f\u4f5c\u7528\u76f8\u5173",children:"\u526f\u4f5c\u7528\u76f8\u5173"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u526f\u4f5c\u7528\uff1a\u53ef\u4ee5\u89e6\u53d1dom\u64cd\u4f5c\u7684\u5c5e\u6027"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"v1813",children:(0,t.jsx)(n.code,{children:"v18.1.3"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"type Fiber={\n  //...\n  flags: Flags,\n  \n  subtreeFlags: Flags,\n  deletions: Array<Fiber> | null,\n\n  lanes: Lanes,\n  childLanes: Lanes,\n  //...\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"v17",children:(0,t.jsx)(n.code,{children:"v17"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"type Fiber={\n  //...\n  // \u8be5 Fiber \u5bf9\u5e94\u7ec4\u4ef6\u4ea7\u751f\u7684\u72b6\u6001\u66f4\u65b0\u4f1a\u5b58\u653e\u5728\u8fd9\u4e2a\u961f\u5217\u91cc\u9762\n  updateQueue: mixed,\n  \n  // \u7528\u6765\u8bb0\u5f55\u5f53\u524d Fiber \u8981\u6267\u884c\u7684 DOM\u64cd\u4f5c\n  effectTag: SideEffectTag,\n  \n  // \u5b50\u6811\u4e2d\u7b2c\u4e00\u4e2a side effect\n  firstEffect: Fiber\t| null,\n  \n  // \u5355\u94fe\u8868\u7528\u6765\u5feb\u901f\u67e5\u627e\u4e0b\u4e00\u4e2a side effect\n  nextEffect: Fiber\t| null,\n  \n  // \u5b50\u6811\u4e2d\u6700\u540e\u4e00\u4e2a side effect\n  lastEffect: Fiber\t| null,\n  \n  //\t\u4efb\u52a1\u7684\u8fc7\u671f\u65f6\u95f4\n  expirationTime: ExpirationTime,\n  \n  //\t\u5f53\u524d\u7ec4\u4ef6\u53ca\u5b50\u7ec4\u4ef6\u5904\u4e8e\u4f55\u79cd\u6e32\u67d3\u6a21\u5f0f \n  mode: TypeOfMode,\n  //...\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"TypeOfMode\u8be6\u60c5"})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>d});var t=r(6540);const i={},c=t.createContext(i);function s(e){const n=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(c.Provider,{value:n},e.children)}}}]);